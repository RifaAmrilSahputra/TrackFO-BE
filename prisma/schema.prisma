generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}


model User {
  id_user   Int       @id @default(autoincrement())
  nama      String
  email     String    @unique
  password  String
  createdAt DateTime  @default(now())

  // relations
  roles     UserRole[]
  teknisi   DataTeknisi?
}

model Role {
  id_role Int      @id @default(autoincrement())
  nama_role String @unique

  users UserRole[]
}

model UserRole {
  id_user Int
  id_role Int

  user User @relation(fields: [id_user], references: [id_user])
  role Role @relation(fields: [id_role], references: [id_role])

  @@id([id_user, id_role])
}

model DataTeknisi {
  id_teknisi Int    @id
  no_hp      String
  area_kerja String
  alamat     String?
  koordinat  String? // store as text like 'lat,lng'

  user User @relation(fields: [id_teknisi], references: [id_user])
}
